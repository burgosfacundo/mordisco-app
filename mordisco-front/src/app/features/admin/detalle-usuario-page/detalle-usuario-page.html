<div class="w-full max-w-7xl mx-auto px-4 py-8 space-y-8 pt-36">
  
  <!-- Hero Title-->
  <div class="text-center space-y-2">
    <h1 class="titulo-hero">
      {{user?.nombre}}  {{user?.apellido}}
    </h1>
    <p class="text-gray-600 text-lg">
      Información del usuario #{{ user?.id }}
    </p>
  </div>

  @if (isLoading) {
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <p class="loading-text">Cargando usuario...</p>
    </div>
  }@else{
    @if(user) {
      <article class="bg-white rounded-xl shadow-md overflow-hidden 
                      transition-all duration-300 hover:shadow-xl hover:-translate-y-1
                      flex flex-col h-full border border-gray-100">
        
        <!-- Header con icono de usuario -->
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-100">
            <div class="flex-1 min-w-0">
              <p class="text-lg font-semibold text-gray-800 truncate">
                 Información de contacto
              </p>
            </div>
        </div>

        <!-- Información de contacto -->
        <div class="flex-1 px-6 py-4 space-y-3">
          <div class="flex items-center gap-3 text-gray-600">
            <mat-icon class="text-gray-400 text-xl">email</mat-icon>
            <p class="text-sm truncate flex-1">
              {{ user.email }}
            </p>
          </div>
          
          <div class="flex items-center gap-3 text-gray-600">
            <mat-icon class="text-gray-400 text-xl">phone</mat-icon>
            <p class="text-sm truncate flex-1">
              {{ user.telefono }}
            </p>
          </div>
        </div>

        <!-- Footer con badge de rol -->
       <div class="px-6 py-4 bg-gray-50 border-t border-gray-100">
        <div class="flex items-center justify-between mb-4">
          <span class="text-xs text-gray-500 font-medium">Rol</span>
          <span [class]="'badge-' + rol?.toLowerCase()?.replace('role_', '')">
            {{ rol?.replace('ROLE_', '') }}
          </span>
        </div>
        <button 
          class="mt-auto w-full py-2.5 rounded-lg
          bg-red-700 text-white font-semibold text-sm
          hover:bg-red-900 active:scale-95
          transition-all duration-200
          focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"             
          (click)="bloquearCuenta()"> Bloquear cuenta
        </button>  
      </div>
      </article>

      @if(rol === 'ROLE_CLIENTE'){
        <app-mis-pedidos-cliente-page [adminMode]="true" [admin_idUser]="user.id"></app-mis-pedidos-cliente-page>
      }@else if (rol === 'ROLE_REPARTIDOR') {
        <app-entregas-page [adminMode]="true" [admin_idUser]="user.id"></app-entregas-page>
      }

    <!-- Sección: Calificaciones pedidos -->
    @if(rol !== 'ROLE_REPARTIDOR'){ 
    <section class="space-y-6">
      <h2 class="titulo-seccion">
        Calificaciones de los pedidos
      </h2>

      @if (calificacionesPedidos && calificacionesPedidos.length > 0) {
        
        <ul class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          @for (calificacion of calificacionesPedidos; track calificacion.id) {
            <li class="fade-in">
              <app-calificacion-card-admin 
                [calificacionP]="calificacion"
                [clienteFlag]="clienteFlag">
              </app-calificacion-card-admin>
            </li>
          }
        </ul>

        <!-- Paginador -->
        <div class="flex justify-center mt-8">
          <mat-paginator
            [length]="lengthCalificacionPedidos"
            [pageSize]="sizeCalificacionPedidos"
            [pageIndex]="pageCalificacionPedidos"
            (page)="onPageChangeCalificacionPedido($event, rol!)"
            class="bg-white rounded-xl shadow-md">
          </mat-paginator>
        </div>
      } @else {
        <div class="empty-state">
          <svg class="empty-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
          </svg>
          <h3 class="empty-title">Aún no tiene calificaciones</h3>
        </div>
      }
    </section>
    }
    @if(rol!=='ROLE_RESTAURANTE'){
      <section class="space-y-6">
          @if(rol === 'ROLE_REPARTIDOR') {<h2 class="titulo-seccion"> Calificaciones del repartidor </h2>}
          @else if (rol === 'ROLE_CLIENTE') {<h2 class="titulo-seccion">Calificacion a los repartidores</h2>}
      
      @if (calificacionesRepartidores && calificacionesRepartidores.length > 0) {
        <ul class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          @for (calificacion of calificacionesRepartidores; track calificacion.id) {
            <li class="fade-in">
              <app-calificacion-card-admin 
                [calificacionR]="calificacion"
                [clienteFlag]="clienteFlag">
              </app-calificacion-card-admin>
            </li>
          }
        </ul>

        <!-- Paginador -->
        <div class="flex justify-center mt-8">
          <mat-paginator
            [length]="lengthCalificacionRepartidores"
            [pageSize]="sizeCalificacionRepartidores"
            [pageIndex]="pageCalificacionRepartidores"
            (page)="onPageChangeCalificacionRepartidor($event, rol!)"
            class="bg-white rounded-xl shadow-md">
          </mat-paginator>
        </div>
      } @else {
        <div class="empty-state">
          <svg class="empty-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
          </svg>
          <h3 class="empty-title">Aún no tienes calificaciones</h3>
          <p class="empty-description">Tus clientes podrán calificar tu servicio</p>
        </div>
      }
    </section>
    }
    }  
  }
 